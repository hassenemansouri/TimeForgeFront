<div class="container">
  <div class="card">
    <h2 class="text-center mb-4">{{ isEdit ? 'Modifier' : 'Cr√©er' }} un Goal</h2>

    <!-- Titre -->
    <div class="mb-3">
      <label class="form-label fw-bold">Titre</label>
      <input type="text" class="form-control" [(ngModel)]="goal.title" name="title" required minlength="3" />
    </div>

    <!-- Description -->
    <div class="mb-3">
      <label class="form-label fw-bold">Description</label>
      <textarea class="form-control" [(ngModel)]="goal.description" name="description" required minlength="5"></textarea>
    </div>

    <!-- Date de d√©but -->
    <div class="mb-3">
      <label class="form-label fw-bold">Date de d√©but</label>
      <input type="date" class="form-control" [(ngModel)]="goal.startDate" name="startDate" (ngModelChange)="calculateEndDate()" />
    </div>

    <!-- Cat√©gorie -->
    <div class="mb-3">
      <label class="form-label fw-bold">Cat√©gorie</label>
      <select class="form-control" [(ngModel)]="selectedCategoryId" name="categorie" (change)="calculateEndDate()">
        <option disabled [value]="''">-- Choisissez une cat√©gorie --</option>
        <option *ngFor="let cat of categories" [value]="cat.categorie_id">
          {{ cat.libelle }} - {{ cat.description }}
        </option>
      </select>
    </div>

    <!-- Date de fin -->
    <div class="mb-3">
      <label class="form-label fw-bold">Date de fin</label>
      <input type="date" class="form-control" [(ngModel)]="goal.endDate" name="endDate" readonly />
    </div>

    <!-- Erreur -->
    <div class="alert alert-danger" *ngIf="serverError">
      {{ serverError }}
    </div>

    <!-- Boutons -->
    <div class="btn-container">
      <button type="button" class="btn btn-success" (click)="saveGoal()">üíæ Enregistrer</button>
      <button type="button" class="btn btn-secondary" (click)="router.navigate(['/goals'])">‚ùå Annuler</button>
    </div>
  </div>
</div>
